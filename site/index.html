<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Climb and Area Codes</title>
  <meta name="description" content="designing & picking practical identifiers for climbs">
  <link rel="stylesheet" href="main.css">
  <style>
    h2 {
      margin-top: 3em;
    }
    .codes-table {
      border-collapse: collapse;
      margin: auto;
      margin-bottom: 1em;
    }
    .codes-table,
    .codes-table th,
    .codes-table td {
      border: solid black 1px;
      border-collapse: collapse;
      padding: 0.5em;
    }
    .codes-table__code {
      font-family: monospace;
    }

    main {
      max-width: 600px;
      margin: auto;
    }
  </style>
</head>

<body>
<main>

  <h1>Consensus Climb &amp; Area Codes</h1>
  <div class="col-2">
    <p>
      Climbing is growing quickly and guides are fragmenting.
      An identification scheme would help climbers
      use multiple guides/platforms and it would encourage platform discovery.
    </p>
    <p>
      The id scheme should be accurate enough to be helpful,
      but not so precise that it becomes cumbersome.
    </p>
    <p>
      For brevity, this refers to
      <em><strong>Co</strong>nsensus <strong>C</strong>limb and <strong>A</strong>rea Codes</em> as
      <em>Coca Codes</em>.
    </p>
    <p>
      The name <em>Coca Code</em> isn&apos;t final and this document is a draft.
    </p>
  </div>

  <hr>

  <h2>Intro</h2>
  <p>
    Essentially, Coca Codes are common abbreviations for climbs and climbing destinations.
  </p>
  <p>
    They should meet a few goals:
  </p>
  <ol>
    <li>Offer concise, transparent identification for climbs and destinations</li>
    <li>
      Be easily adoptable (e.g., simple, approachable, low-code)
    </li>
    <li>
      Be useful in multiple contexts
      <ul>
        <li>readable and writable by computers and humans
        <li>usable in printed guidebooks and digital guides
      </ul>
    </li>
    <li>
      Allow the community to come to a consensus
      when codes differ
    </li>
  </ol>
  
  <h3>Destination Codes</h3>
  <p>
    Destination Codes must be unique within ~200 miles (300 kilometers).
    This is sufficiently accurate for casual conversation.
    When prefixed with a 3-character geohash it will be globally unique.
  </p>
  <table class="codes-table">
    <thead>
      <tr>
        <th>Destination</th>
        <th>Near</th>
        <th>Code</th>
        <th>Plain Text</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Yosemite Valley</td>
        <td><a href="https://geohash.softeng.co/9qd">9qd</a></td>
        <td>YOV</td>
        <td class="codes-table__code">9qd:YOV</td>
      </tr>
      <tr>
        <td>Tuolumne Meadows</td>
        <td><a href="https://geohash.softeng.co/9qe">9qe</a></td>
        <td>TUO</td>
        <td class="codes-table__code">9qe:TUO</td>
      </tr>
      <tr>
        <td>Red Rocks</td>
        <td><a href="https://geohash.softeng.co/9qm">9qm</a></td>
        <td>RED</td>
        <td class="codes-table__code">9qm:RED</td>
      </tr>
      <tr>
        <td>Fontainbleau</td>
        <td><a href="https://geohash.softeng.co/u09">u09</a></td>
        <td>FONT</td>
        <td class="codes-table__code">u09:FONT</td>
      </tr>
      <tr>
        <td>The Gunks</td>
        <td><a href="https://geohash.softeng.co/dr7">dr7</a></td>
        <td>GNX</td>
        <td class="codes-table__code">dr7:GNX</td>
      </tr>
      <tr>
        <td>The New River Gorge</td>
        <td><a href="https://geohash.softeng.co/dny">dny</a></td>
        <td>NRG</td>
        <td class="codes-table__code">dny:NRG</td>
      </tr>
    </tbody>
  </table>
  <aside class="todo">
    the following few paragraphs are an <code>&lt;aside&gt;</code>
    which should be styled appropriately.
  </aside>
  <aside>
    <p>
      The term <em>destination</em> here is used for the idea of
      a geospatial boundary that organizes climbs.
      Destinations do not intersect or nest.
      This is in contrast with an <em>area</em> which, as generally used,
      is too vague to be practical for our purposes.
    <p>
    <details>
      <summary>Area/Destination Differences</summary>
      <p>
        Take the The Red River Gorge: from North to South it&apos;s about
        <a href="https://www.redriverclimbing.com/RRCGuide/?type=map">20 miles</a>,
        and it contains smaller regions,
        sometimes sub-divided by ownership,
        which contain crags,
        these can be organized by walls,
        and sometimes divided further into sections of walls. 
        <!--
        For example, within the Red River Gorge
        &rarr; Southern Region
        &rarr; Bald Rock Fork Recreational Preserve (BRRP)
        &rarr; Motherlode
        &rarr; Madness Cave.
        Each of these could be reffered to as an <em>area</em>.
        -->
      </p>
      
      </p>
        The Red River Gorge is an extreme example that
        highlights the mess around what's considered an area.
        For our purposes, we need a simple solution to identify climbs;
        adding <em>areas</em> could get out of hand quickly.
      </p>
    </details>
    
  </aside>
<!--
  <aside>
    For context,
    300km covers most of Southern California,
    300km covers the Swiss Alps,
    300km covers Boulder, Colorado Springs, and Gunnison.
    Prefixing the destination
  </aside>
-->


  <h3>Climb Codes</h3>
  <p>
    Climb Codes should be unique within either 3 miles (5km)
    <em>or</em> the destination that the climb is in,
    whichever contains more climbs.
    This sufficiently precise for casual conversation or use within a guidebook.
    Also, when prefixed with a 6-character geohash, it will be globally unique.
    <br>
    Optionally, for improved human friendliness, the parent destination&apos;s code can be used.
  </p>
  <table class="codes-table">
    <thead>
      <tr>
        <th>Climb</th>
        <th>Code</th>
        <th colspan=2>Near/In</th>
        <th>Plain Text</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td rowspan=2>Plumber&apos;s Crack</td>
        <td rowspan=2>PLC</td>
        <td colspan=2><a href="https://geohash.softeng.co/9qmvtw">9qmvtw</a></td>
        <td class="codes-table__code">9qmvtw:PLC</td>
      </tr>
      <tr>
        <td><a href="https://geohash.softeng.co/9qm">9qm</a></td>
        <td>RED</td>
        <td class="codes-table__code">9qm:RED:PLC</td>
      </tr>
      <tr>
        <td rowspan=2>Midnight Lightning</td>
        <td rowspan=2>MNL</td>
        <td colspan=2><a href="https://geohash.softeng.co/9qdywq">9qdywq</a></td>
        <td class="codes-table__code">9qdywq:MNL</td>
      </tr>
      <tr>
        <td><a href="https://geohash.softeng.co/9qd">9qd</a></td>
        <td>YOV</td>
        <td class="codes-table__code">9qd:YOV:MNL</td>
      </tr>
      <tr>
        <td rowspan=2>The Nose</td>
        <td rowspan=2>NOS</td>
        <td colspan=2><a href="https://geohash.softeng.co/9qdyts">9qdyts</a></td>
        <td class="codes-table__code">9qdyts:NOS</td>
      </tr>
      <tr>
        <td><a href="https://geohash.softeng.co/9qd">9qd</a></td>
        <td>YOV</td>
        <td class="codes-table__code">9qd:YOV:NOS</td>
      </tr>
    </tbody>
  </table>
  <p>
    Also, see <a href="examples/">interactive examples</a>
  </p>

  <h2>How to pick codes</h2>
  Assuming you have a climb (or destination) and you want a code for it:
  <ol>
    <li>check a Coca explorer (and guidebooks) to see if a code already exists
    <li>pick a code
        <!-- abstract ids or non-literal names prevent renaming issues -->
    <li>upload to services or contact guidebook authors
  </ol>
  <aside class=todo>make a simple flow chart for this</aside>

  <h2>Implementing Coca Codes</h2>
  <aside class="todo">add hints and guidelines for services that want to support Coca codes</aside>

  <h3>How to publish codes</h3>
  <p>
    Simplicity is the goal.
    A <a href="https://en.wikipedia.org/wiki/Tab-separated_values" title="text/tab-separated-values">TSV</a>
    documents would be easy to create, share, and use.
  </p>

  <section>
    <ul>
      <li><strong>geohash</strong>
      <li><strong>Coca code</strong>
      <li><strong>climb name</strong>
      <li><strong>url</strong>
    </ul>
<pre class="file-contents">9qdyts	NOS	The Nose	https://www.thecrag.com/20685193</pre>
    <aside class=todo>
      find something better?
      a geohash isn&apos;t ideal.
      latlng coordinates and parent-destination isn&apos;t great either.
    </aside>
  </section>

  <section>
    <ul>
      <li><strong>geohash</strong> <!-- TODO: suggest specificity -->
      <li><strong>Coca Code</strong>
      <li><strong>destination name</strong>
      <li><strong>url</strong>
    </ul>
<pre class="file-contents">9qd	YOV	Yosemite Valley	https://www.thecrag.com/14343655</pre>
  </section>

  <!--
    If you're implementing Coca Codes,
    link to a viewer (to be written)
    <a href="//steleclimbing.gitlab.io/climb-and-area-code-viewer">here</a> or
  -->

  <h2>Existing solutions outside of climbing</h2>
  <p>
    This the prior art relation to climb identification,
    globally/universally unique ids,
    and geospatial identification.
  </p>

  <h3>Big Random(ish) Values</h3>
  <!-- https://sudhir.io/uuids-ulids -->
  <ul>
    <li><a href="https://datatracker.ietf.org/doc/html/rfc4122">UUIDs</a>
    <li><a href="https://github.com/ulid/spec">ULID</a>
    <li>MongoDB's
        <a href="https://www.mongodb.com/docs/manual/reference/method/ObjectId/">ObjectId</a>
    <li>Youtube IDs
        (<a href="https://www.youtube.com/watch?v=gocwRvLhDf8">video on capacity</a>)
  </ul>

  <h3>Geospatial</h3>
  <ul>
    <li><a href="http://geohash.org/">geohash</a></li>
      <ul>
        <li><a href="https://wiki.openstreetmap.org/wiki/Geohash">OSM's Wiki</a></li>
        <li><a href="https://www.movable-type.co.uk/scripts/geohash.html">a nice explorer</a></li>
        <li><a href="https://geohash.softeng.co/">A nice explorer</a></li>
      </ul>
    </li>
    <li><a href="https://what3words.com/">what3words</a> is interesting, but not applicable to our needs</li>
    <li>
      <a href="https://www.mapcode.com/">Mapcode</a> offers a system that's analagous to ours in a few ways,
      but is primarily a geocoding system.
      The <a href="https://www.mapcode.com/territory">Territories</a> page, however, is more relevant.
    </li>
    <li><a href="https://maps.google.com/pluscodes/">plus codes</a></li>
  </ul>
  <p>
    The article
    <a href="https://en.wikipedia.org/wiki/Geocode">Geocode</a>
    offers <em>many</em> other options
  </p>

  <h3>Other</h3>
  <ul>
    <li>
      Books use the
      <a href="https://en.wikipedia.org/wiki/Dewey_Decimal_Classification">Dewey Decimal Classification</a>
      and <a href="https://en.wikipedia.org/wiki/International_Standard_Book_Number">ISBN</a>
    </li>
    <li>Chemicals have a <a href="https://en.wikipedia.org/wiki/CAS_Registry_Number">CAS RN</a></li>
    <li>
      Countries use 
      <a href="https://en.wikipedia.org/wiki/ISO_3166">ISO 3166</a> and
      <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2</a>
    </li>
  </ul>

  <h2>Questions, Issues, and Comments</h2>
  <style>
    .issues {
      margin: 0;
      padding: 0;
      list-style-type: none;
    }
    .issues > li {
      padding: 0;
      margin: 0;
      margin-bottom: 2em;
    }
  </style>
  <ul class=issues>
    <li>
      The codes should be durable.
      <ul>
        <li>Alabama Hills, in CA is divided between <code>9qe</code> and <code>9qs</code>
        <li>Estes Park, in CO is close to both <code>9xh</code> and <code>9xj</code>
      </ul>
      This scheme should be able to handle these close calls.
    </li>
    <li>
      With using only the delimiter &quot;:&quot;, (capitalization aside) it's not immediately obvious
      whether a code represents a climb or destination.
      <!--
        https://geohash.softeng.co/dry
        https://geohash.softeng.co/spy
        https://geohash.softeng.co/ben
      -->
    </li>
    <li>
      What is a destination?
      <br>(e.g., Yosemite National Park, Yosemite Valley, Upper Yosemite Valley, El Capitain)
      <br> Does it really matter? What are the consequences?
    </li>
    <li>Can I use 4 letters for a destination? 5 letters?
    <li>Pick letters to reflect spelling or phoenetics? GUNKS vs GUNK vs GNK vs GNX?
      <!-- TODO: a test to check if there's enough space in a populated destination -->
    <li>Precision and keyspace <!-- is this the correct word -->
      <ul>
        <li>Is 3 digits precise enough for a destination?
        <li>Is 3 characters enough keyspace for a destination?
            jtree has &gt;20,000 routes
            (see <a href="">this</a> citing
                 <a href="https://www.youtube.com/watch?v=HQUwdfuEkKk">this</a>)
<code>Math.pow('abcdefghijklmnopqrstuvwxyz0123456789'.length, 4) == 1679616</code>
<code>Math.pow('abcdefghijklmnopqrstuvwxyz0123456789'.length, 3) == 46656</code>
        <li>Is 6 digits precise enough?
        <li>Are there enough options in three letters?
      </ul>
    </li>
    <li>
      <strong>is there a canonical form?</strong>
      (<code>{geohash}.{climb code}</code> vs
       <code>{geohash}.{destination codes}.{climb code}</code>)
      again, what are the consequences of this being unspecificed?
    </li>
    <li>the separator between codes
      (using ":" for now)
      (perhaps it should be
       <a href="https://stackoverflow.com/questions/695438/what-are-the-safe-characters-for-making-urls">url friendly</a>
       since this is intended for apps)
    </li>
    <li>is there an upper limit on characters?
    <li>is there a  lower limit on characters?
      (see <a href="https://www.mountainproject.com/route/106004766/go">Go!</a>
       and <a href="https://www.mountainproject.com/route/113230570/go">Go</a>)
    <li>Is Unicode okay?
      (see <a href="https://www.mountainproject.com/route/105835105/manana">Mañana</a>)
  </ul>

  <footer style="font-size:0.8em;">
    <p>
      There aren't <em>that</em> many three-character geohashes that fall on land.
      It could be reasonable to define some prefixes and avoid the geohash dependency entirely.
      This <a href="https://en.wikipedia.org/wiki/File:Huc_region-edit.png">hydrologic boundary map</a>
      wouln't be usable, but it conveys a similar idea.
    </p>
    <p>
      For example, if the North American West Coast had the code <code>NAW</code>,
      Could we get away with <code>NAW:YOV:NOSE</code> for The Nose?
    </p>
    <hr>
    <a href="https://xkcd.com/927/">obligiatory xkcd</a>
    <a href="https://vimeo.com/108415168">not satisified?</a>
  </footer>

</main>
</body>
</html>

